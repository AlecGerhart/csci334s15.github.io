<!DOCTYPE html>
<html>

	<head>

		<meta charset="utf-8">
		<title>Map</title>
		<script type="text/javascript" src="d3/d3.v3.js"></script>
		<script type="text/javascript" src="gradientUSMap.js"></script>		
		<style>

			svg {
				background-color: grey;
			}

			#color-selector {
				position: relative;
			}
			.state{
				fill: none;
				stroke: #a9a9a9;
				stroke-width: 1;
			}
			.state:hover{
				fill-opacity:0.5;
			}
			#stateName {
				position: absolute;
			}
			#tooltip {   
				position: absolute;           
				text-align: center;
				padding: 20px;             
				margin: 10px;
				font: 12px sans-serif;        
				background: lightsteelblue;   
				border: 1px;      
				border-radius: 2px;           
				pointer-events: none;         
			}
			#tooltip h4{
				margin:0;
				font-size:14px;
			}
			#tooltip{
				background:rgba(0,0,0,0.9);
				border:1px solid grey;
				border-radius:5px;
				font-size:12px;
				width:auto;
				padding:4px;
				color:white;
				opacity:0;
			}
			#tooltip table{
				table-layout:fixed;
			}
			#tooltip tr td{
				padding:0;
				margin:0;
			}
			#tooltip tr td:nth-child(1){
				width:50px;
			}
			#tooltip tr td:nth-child(2){
				text-align:center;
			}
		</style>

	</head>

	<body>

		<div id="pageTitle">
			<h1 style="text-align:center">HA1C Tests Per Patient</h1>

			<p style="text-indent:50px">The Hemoglobin A1c (HA1c) test is a blood test measuring the average blood sugar level over the past 2 to 3 months, and is used to see how well a person's diabetes is being controlled. Poke ratio is a ratio represented by the average number of tests done per patient over the number of tests, with an ideal number of 4 tests per year per patient. The Medicare billing data used in this project is collected in 2013. The average poke ratio across the United States is 1.63; State ratio ranges from a minimum of 1.39 to a maximum of 1.78. 
			</p>
			<p style="text-indent:50px">The map below shows poke ratio per state (including Puerto Rico) by Red-Yellow-Green Scale, while states without any data available is in Grey. You may change the gradient level for more details.
			</p>

		</div>

		<div id="comboDiv">
		</div>

		<script type="text/javascript">

			var us_poke_data_file = "json/poke_ratio_correct2.csv";
			var map_json_file = "json/us-states.json";
			var county_path_file = "json/stateJSON/";
			var county_poke_data_file = "json/countyPokes/";

			gradientMap.setColors("#D4A65D","#D45D5D");
			gradientMap.setFeature("Poke Ratio");
			gradientMap.setPaths(map_json_file, us_poke_data_file, county_path_file, county_poke_data_file);

			gradientMap.drawMap();

		</script>


	</body>	

</html>